name: Deploy

on:
  push:
    branches:
      - develop
  pull_request:
    branches:
      - develop

jobs:
  #CPPCheck:
  #  runs-on: ubuntu-latest

  #  steps:
  #  - name: Checkout
  #    uses: actions/checkout@v3

  #  - name: Install CPPCheck
  #    run: sudo apt-get install cppcheck

  #  - name: Run CPPCheck
  #    run: |
  #      make cppcheck

  #GoogleTest:
  #  runs-on: ubuntu-latest

  #  steps:
  #  - name: Checkout
  #    uses: actions/checkout@v3

  #  - name: Install Checkout
  #    run: sudo apt-get install docker

  #  - name: Execute GoogleTest
  #    run: |
  #      chmod 777 ./linux-presubmit.sh
  #      ./linux-presubmit.sh

  #Build:
  #  runs-on: ubuntu-latest
  #  needs:
  #    - CPPCheck
  #    - GoogleTest

  #  steps:
  #  - name: Checkout
  #    uses: actions/checkout@v3

  #  - name: Build
  #    run: |
  #      make

  CreatePR:
    runs-on: ubuntu-latest
    #needs: Build

    steps:
    - name: Create Pull Request to Master
      uses: devops-infra/action-pull-request@v0.5.5
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        source_branch: develop
        target_branch: master
        title: My pull request
        template: .github/PULL_REQUEST_TEMPLATE.md
        body: "**Automated pull request**"
        reviewer: octocat
        assignee: octocat
        label: enhancement
        milestone: My milestone
        draft: true
        old_string: "<!-- Add your description here -->"
        new_string: "** Automatic pull request**"
        get_diff: true
        ignore_users: "dependabot"
        allow_no_diff: false
